<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Demo React Page Div</title>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.3/normalize.min.css" rel="stylesheet"/>

    <script src="https://fb.me/react-0.14.7.js"></script>
    <script src="https://fb.me/react-dom-0.14.7.js"></script>

    <script src="dist/ReactPageDiv.js"></script>

    <style>
        .container {
            margin: 10px auto;
            width: 768px;
        }

        @media (max-width: 768px) {
            .container {
                width: 100%;
            }

        }

        .page {
            margin: 10px auto;
            box-shadow: 0 0 4px rgba(0, 0, 0, 0.5);
        }

        @media print {
            .hidden-print {
                display: none;
            }

            .page {
                margin: 0;
                box-shadow: none;
            }
        }
    </style>
</head>
<body>

<div id="demo"></div>

<script>
    var rpd = React.createFactory(ReactPageDiv),
            d = React.DOM;

    var PageDemo = React.createClass({
        displayName: 'Page Demo',

        getInitialState: function () {
            return {
                height: 100
            };
        },

        getPages: function () {
            return rpd({
                className: 'page',
                width: 8.5,
                widthUnit: 'in',
                height: 11,
                heightUnit: 'in',
                dpi: 96
            }, d.div({
                style: { display: 'flex', flexFlow: 'column nowrap', minHeight: '100%' }
            }, [
                d.h1({
                    key: 1,
                    style: { flex: 'none' }
                }, 'Heading 1'),

                d.div({
                    key: 2,
                    style: {
                        flex: '1 0',
                        minHeight: 0,
                        backgroundColor: 'red'
                    }
                }, [
                    d.div({ key: 1, style: { minHeight: this.state.height, backgroundColor: 'pink' } }, 'hello')
                ]),

                d.div({
                    key: 3,
                    style: { flex: 'none', display: 'flex', backgroundColor: 'yellow', minHeight: 0 }
                }, [
                    d.div({ key: 1, style: { flex: '1 1 50%' } }, d.table({}, [
                        d.thead({ key: 1 }, d.tr({}, [ d.th({ key: 1 }, 'Hello'), d.th({ key: 2 }, 'World') ])),
                        d.tbody({ key: 2 }, [
                            d.tr({ key: 1 }, [ d.td({ key: 1 }, 'Table'), d.td({ key: 2 }, 'Data') ])
                        ])
                    ])),
                    d.div({ key: 2, style: { flex: '1 1 50%' } }, d.table({}, [
                        d.thead({ key: 1 }, d.tr({}, [ d.th({ key: 1 }, 'Hello'), d.th({ key: 2 }, 'World') ])),
                        d.tbody({ key: 2 }, [
                            d.tr({ key: 1 }, [ d.td({ key: 1 }, 'Table'), d.td({ key: 2 }, 'Data') ]),
                            d.tr({ key: 2 }, [ d.td({ key: 1 }, 'Table'), d.td({ key: 2 }, 'Data') ]),
                            d.tr({ key: 3 }, [ d.td({ key: 1 }, 'Table'), d.td({ key: 2 }, 'Data') ])
                        ])
                    ]))
                ]),

                d.h3({
                    key: 4,
                    style: { flex: 'none', minHeight: 0 }
                }, 'Footer')
            ]));
        },

        setHeight: function (e) {
            this.setState({
                height: e.target.value
            });
        },

        render: function () {
            return d.div({}, [
                d.div({ key: 'form', className: 'container hidden-print' }, [
                    d.label({ key: 1 }, 'Section Content Height: '),
                    d.input({
                        key: 2,
                        type: 'number',
                        min: 0,
                        step: 10,
                        value: this.state.height,
                        onChange: this.setHeight
                    })
                ]),

                d.div({ key: 'pgs' }, this.getPages())
            ]);
        }
    });

    var pdf = React.createFactory(PageDemo);

    var Demo = React.createClass({
        displayName: 'Demo',

        getInitialState: function () {
            return {
                sections: 1
            };
        },

        handleChange: function (e) {
            this.setState({
                sections: e.target.value
            });
        },

        getSections: function () {
            var sec = [];
            for (var i = 0; i < this.state.sections; i++) {
                sec.push(pdf({ key: i }));
            }
            return sec;
        },

        render: function () {
            return d.div({}, [
                d.form({ key: 1, className: 'hidden-print' }, [
                    d.label({ key: 1 }, '# of sections: '),
                    d.input({ key: 2, type: 'number', value: this.state.sections, onChange: this.handleChange }),
                    d.hr({ key: 3 })
                ]),

                d.div({ key: 'sec' }, this.getSections())
            ]);
        }
    });

    ReactDOM.render(React.createElement(Demo), document.getElementById('demo'));
</script>

</body>
</html>